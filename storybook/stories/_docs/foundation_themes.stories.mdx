import { Meta, Story, Canvas } from '@storybook/addon-docs'

<Meta title="Foundation/Themes" parameters={{ viewMode: 'docs' }} />

# Themes

## Internal Theme

Apply a body class of `.ThemeInternal` to your build to reflect JPL's internal color scheme. The difference between the internal theme and the default theme is subtle: for the most part, only link colors are changed to `jpl-sky-blue` and `jpl-sky-blue-dark`.

```html
<body class="ThemeInternal">
  <!-- page layout and components go here -->
</body>
```

The following story shows a direct comparison of how BaseLink changes when using `.ThemeInternal` vs the default theme (no body class).

<Canvas>
  <Story name="Internal">
    {`
      <div>
        <div class="ThemeInternal">
          <!-- BaseLink -->
          <div>
            <a
              href="#"
              target=""
              rel=""
              class="BaseLink group cursor-pointer -default underline text-theme-red can-hover:hover:text-theme-red-hover"
            >
              Internal Theme: BaseLink 
            </a>
          </div>
          <!-- /BaseLink -->
        </div>
        <div>
          <!-- BaseLink -->
          <div>
            <a
              href="#"
              target=""
              rel=""
              class="BaseLink group cursor-pointer -default underline text-theme-red can-hover:hover:text-theme-red-hover"
            >
              Default Theme: BaseLink
            </a>
          </div>
          <!-- /BaseLink -->
        </div>
      </div>
    `}
  </Story>
</Canvas>

By default, all stories displayed within this Storybook do <em>not</em> use the internal theme. However, you can set the theme by clicking on the "picture" icon in the toolbar menu. You can test this with the above story--changing the theme to use ThemeInternal should make both links appear blue. Note: some documentation pages use iframes to display components, which circumvents the theme switcher. Thus, for the most accurate representation of the internal theme, we recommend checking the component in the Canvas tab.

## Light & Dark Themes

The light and dark themes in Explorer 1 are structured differently from the "Internal Theme," and are **not intended for use as a body class**. These themes are used to set the context per component or template, and also our [adaptive text colors](#adaptive-text-colors). Explorer 1 defaults to a light color scheme, but you may wish to provide site editors or visitors with the option to set a dark theme on a particular page or throughout your site. To handle switching between light and dark themes, a parent class will need to be set. Individual components that have theme-specific styling will then use these classes as ancestor selectors when setting colors.

<Story name="Light and Dark">
  {`
    <div class="py-4">
      <div><code>.ThemeLight</code></div>
      <div><code>.ThemeDark</code></div>
    </div>
  `}
</Story>

These are currently set at the page template level. If that scope is too wide, it can be scoped to surround appropriate layout elements within as needed.

```html
<body>
  <div class="ThemeLight">
    <!-- the rest of the page -->
  </div>
</body>
```

### Key Points

- `ThemeLight` is the default
- It is recommended that page templates always include the default theme.
- If a page theme is controllable by a site editor, then include appropriate class bindings to switch between `.ThemeLight` or `.ThemeDark`
- These theme classes do not apply styles directly. Instead, components use them as an ancestor selector to modify their own styles.

### Usage in Storybook

Storybook can mimic these theme choices. All stories are wrapped in `ThemeLight` by default. You can switch to `ThemeDark` on any story by using the toolbar menu (the icon looks like a picture). **Note that most components do not have a dark theme, and thus will appear "broken" when viewed with `ThemeDark`.**

### Contributing developers: Writing light/dark theme styles for components

For components that have light and dark themes, add theme rules to the end of your scss. The following is an example of a component whose background should be `bg-white` by default and in `ThemeLight` but `bg-black` in `ThemeDark`

```scss
.MyComponent {
  // set the default background color
  @apply bg-white;
  // set the ThemeDark background color
  .ThemeDark & {
    @apply bg-black;
  }
}
```

## Adaptive Text Colors

Usage of `text-jpl-red` vs `text-jpl-red-light` in context of `ThemeLight` and `ThemeDark` ensures that the contrast of `jpl-red` is sufficient against the background color. To avoid rewriting the CSS rules for each use-case, we created these text classes that follow this rule automatically.

```
.text-theme-red
.text-theme-red-hover
```

### Definition

```css
.text-theme-red {
  @apply text-jpl-red;
  .ThemeDark & {
    @apply text-jpl-red-light;
  }
}
.text-theme-red-hover {
  @apply text-jpl-red-dark;
  .ThemeDark & {
    @apply text-jpl-red;
  }
}
```

### Usage

Try switching the theme from `ThemeLight` to `ThemeDark` using the toolbar at the top of the screen. You will notice a slight change of the red color between the two:

<Canvas>
  <Story name="Adaptive Text Colors">
    {`
      <a class="cursor-pointer font-bold text-theme-red can-hover:hover:text-theme-red-hover">
        Link Text
      </a>
    `}
  </Story>
</Canvas>

> Currently, these classes only work when used inline. In the future, they may be rewritten as a
> plugin to make them compatible with the `@apply` directive.

See [BaseLink](?path=/docs/components-base-baselink--primary-link) for a real usage example.
