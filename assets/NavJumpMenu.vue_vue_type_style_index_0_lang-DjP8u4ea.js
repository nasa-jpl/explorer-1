import{d as T,l as V,_ as z,P as H,o as s,b as i,F as g,L as $,N as I,i as y,e as D,n as C,t as B,k as J,m as E,a as N,c as _,y as F,a5 as P,a1 as U,h as d,R as q,a0 as A}from"./iframe-BaEhLE_2.js";import{h as L}from"./mixins-BY8gm2SO.js";import{N as O,a as G,b as K}from"./NavSecondary-pioWq_Xp.js";import{g as Q}from"./getHeadingId-IS7vBx-m.js";const W=T({name:"NavJumpMenuContent",components:{BaseLink:V},props:{item:{type:Object,required:!0}},methods:{linkClass(a){let r="py-2 lg:py-4";return a?a.children&&a.children.length>0&&(r="pt-2 pb-1 lg:pt-4 lg:pb-2"):r="py-2 lg:pt-4 lg:pb-4",r}}}),X={class:"NavJumpMenuContent bg-white"};function Y(a,r,t,u,m,v){const f=H("BaseLink");return s(),i("ul",X,[(s(!0),i(g,null,$(a.item.children,(l,c)=>(s(),i("li",{key:c,class:"text-base border-b border-gray-light"},[I(f,{href:l.path,variant:"none","link-class":a.linkClass(l)},{default:y(()=>[D("span",null,[a.$attrs["steps-numbering"]?(s(),i("span",{key:0,class:C(a.$attrs["steps-classes"]),"aria-hidden":""},B(`Step ${c+1}:`),3)):J("",!0),E(" "+B(l.title),1)])]),_:2},1032,["href","link-class"])]))),128))])}const Z=z(W,[["render",Y]]),oe=T({__name:"NavJumpMenu",props:{title:{default:void 0},jumpLinks:{default:void 0},blocks:{default:void 0},headingLevel:{default:"h2"},invert:{type:Boolean,default:!0},enabled:{type:Boolean,default:!0},dropdownText:{default:"Jump toâ€¦"}},setup(a,{expose:r}){const t=a,u=N(!1),m=N(),v=_(()=>{if(t.jumpLinks)return t.jumpLinks;if(t.blocks){const n=t.blocks.map((e,p)=>({...e,index:p})).filter(e=>e.blockType==="HeadingBlock"&&e.level===t.headingLevel||e.blockType==="RichTextBlock"&&e.value.includes(`<${t.headingLevel}`)).map(e=>{let p=e,h=[];if(e.blockType==="HeadingBlock")p={path:"#"+Q(e.heading,e.blockId),title:e.heading};else if(e.blockType==="RichTextBlock"){let b=e.value;if(b){const M=new RegExp(`<${t.headingLevel} id="(.*?)">(.*?)</${t.headingLevel}>`,"g"),w=[...b.matchAll(M)];for(let R of w){const[te,j,x]=R,S={path:"#"+j,title:x};h.push(S)}}}return h.length?h:p});return n?n.flat():void 0}return[]}),f=()=>{u.value=!0},l=_(()=>{let o;const k=t.title?{title:t.title,path:"#siteTop"}:{title:"Back to top",path:"#siteTop"},n={title:t.dropdownText,path:"#",children:v.value};return v.value&&(o=[k,n]),o});r({NavJumpMenuRef:m}),F(()=>{L(l.value,!0),setTimeout(f,500)}),P(()=>{u.value=!1});const c=q();return U(c,()=>{L(l.value,!0)}),(o,k)=>o.enabled?(s(),d(O,{key:0,id:"NavJumpMenu",ref_key:"NavJumpMenuRef",ref:m,class:C(["NavJumpMenu",{"-ready":u.value}]),invert:o.invert,"jump-menu":""},{default:y(()=>[(s(!0),i(g,null,$(l.value,(n,e)=>(s(),i(g,null,[n.children&&n.children.length>0?(s(),d(G,{key:e,item:n,index:e,"is-last":l.value&&e===l.value.length-1,invert:o.invert},{default:y(()=>[(s(),d(Z,A({key:e,class:"max-h-[72vh] overflow-y-auto",item:n,ref_for:!0},o.$attrs),null,16,["item"]))]),_:2},1032,["item","index","is-last","invert"])):(s(),d(K,{key:e,item:n,index:e,invert:o.invert},null,8,["item","index","invert"]))],64))),256))]),_:1},8,["class","invert"])):J("",!0)}});export{oe as _};
