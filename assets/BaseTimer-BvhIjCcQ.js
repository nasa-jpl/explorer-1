import{d as y,S as n,_ as b,o as i,h as L,i as v,e as l,b as r,L as U,n as d,k as h,F as f,m as u,t as m,j as k}from"./iframe-CnvubKsn.js";const g=e=>{const t=n().millisecond(0),s=n.max(e,t),o=n.min(e,t);return s?n.duration(s.diff(o)):void 0},c={years:{shortLabel:"Yrs",longLabel:"Years"},months:{shortLabel:"Mos",longLabel:"Months"},days:{shortLabel:"Days",longLabel:"Days"},hours:{shortLabel:"Hrs",longLabel:"Hours"},minutes:{shortLabel:"Mins",longLabel:"Minutes"},seconds:{shortLabel:"Secs",longLabel:"Seconds"}},w=y({name:"BaseTimer",props:{targetDateTime:{type:String,required:!0},selectedUnits:{type:Array,required:!1,validator:e=>e.every(t=>!!c[t])},inline:{type:Boolean,required:!1,default:!1},countdown:{type:Boolean,required:!1,default:!1}},data(){return{diff:void 0,interval:void 0}},computed:{selectedUnitsComputed(){if(!this.selectedUnits||this.selectedUnits.length===0){const e=["years","months","days","hours","minutes","seconds"];let t=[];return e.forEach(s=>this.unitSignificant(s)?t.push(s):t),t.length<=3?["hours","minutes","seconds"]:(t=t.slice(0,3),t)}return this.selectedUnits},isPast(){if(this.targetDateTime){const e=n(new Date);if(n(new Date(this.targetDateTime.replace(/\s+/g,"T"))).millisecond(0).isBefore(e))return!0}return!1}},mounted(){const e=n(new Date(this.targetDateTime.replace(/\s+/g,"T"))).millisecond(0);this.diff=g(e),(this.selectedUnitsComputed.includes("seconds")||this.selectedUnitsComputed.includes("minutes"))&&(this.interval=setInterval(()=>{var o;this.diff=g(e),((o=this.diff)==null?void 0:o.as("seconds"))===0&&clearInterval(this.interval)},1e3))},beforeUnmount(){clearInterval(this.interval)},methods:{shortLabel(e){var t;return((t=c[e])==null?void 0:t.shortLabel)||e},longLabel(e){var t;return((t=c[e])==null?void 0:t.longLabel)||e},unitSignificant(e){var s;if(this.diff===null)return!1;const t=(s=this.diff)==null?void 0:s.get(e);return!!(t&&t>0||this.checkOtherUnits(e))},checkOtherUnits(e){if(this.diff){if(e==="seconds"){if(this.diff.get("minutes")>0||this.diff.get("hours")>0||this.diff.get("days")>0||this.diff.get("months")>0||this.diff.get("years")>0)return!0}else if(e==="minutes"){if(this.diff.get("hours")>0||this.diff.get("days")>0||this.diff.get("months")>0||this.diff.get("years")>0)return!0}else if(e==="hours"){if(this.diff.get("days")>0||this.diff.get("months")>0||this.diff.get("years")>0)return!0}else if(e==="days"){if(this.diff.get("months")>0||this.diff.get("years")>0)return!0}else if(e==="months"&&this.diff.get("years")>0)return!0}return!1},unitValue(e){var s;if(this.diff===null)return"";const t=(s=this.diff)==null?void 0:s.get(e);return t==null?void 0:t.toString().padStart(2,"0")}}}),B=["hidden"],D={key:0},T={class:"unit text-body-xs uppercase","data-chromatic":"ignore"};function C(e,t,s,o,S,x){return i(),L(k(e.diff?"time":"div"),{class:d(["BaseTimer whitespace-nowrap block",{"-inline":e.inline}]),datetime:e.diff?e.diff.toISOString():null,"data-chromatic":"ignore"},{default:v(()=>[l("span",{hidden:!!e.diff},"Loading…",8,B),l("span",{class:d(["transition-opacity duration-500 ease-in-out opacity-0",{"opacity-100":e.diff,"flex justify-between":e.inline}])},[(i(!0),r(f,null,U(e.selectedUnitsComputed,(a,p)=>(i(),r("span",{key:a},[p!==0?(i(),r("span",{key:0,class:d(["text-stats-xl text-stats-separator",{"block invisible -mt-6 md:inline md:visible md:mt-0":e.selectedUnitsComputed.length>=4&&a==="hours"}])}," : ",2)):h("",!0),l("span",{class:d(["inline-block align-top",a==="seconds"?"text-left":"text-center"]),"aria-hidden":"true"},[l("span",{class:d(["text-stats-xl",{"text-seconds":a==="seconds"}]),"data-chromatic":"ignore"},[e.countdown&&e.isPast?(i(),r(f,{key:0},[u("00")],64)):(i(),r(f,{key:1},[u(m(e.unitValue(a)),1)],64))],2),e.inline?h("",!0):(i(),r("br",D)),l("span",T,m(e.shortLabel(a)),1)],2)]))),128))],2)]),_:1},8,["datetime","class"])}const q=b(w,[["render",C]]);export{q as B};
