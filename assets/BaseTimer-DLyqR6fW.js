import{a as b,R as i,_ as k,o as a,k as w,l as v,h as d,g as o,B as T,n as r,p as u,F as c,z as f,t as h,m as D}from"./iframe-G_CakBWE.js";const p=e=>{const t=i().millisecond(0),s=i.max(e,t),l=i.min(e,t);return s?i.duration(s.diff(l)):void 0},m={years:{shortLabel:"Yrs",longLabel:"Years"},months:{shortLabel:"Mos",longLabel:"Months"},days:{shortLabel:"Days",longLabel:"Days"},hours:{shortLabel:"Hrs",longLabel:"Hours"},minutes:{shortLabel:"Mins",longLabel:"Minutes"},seconds:{shortLabel:"Secs",longLabel:"Seconds"}},y=b({name:"BaseTimer",props:{targetDateTime:{type:String,required:!0},selectedUnits:{type:Array,required:!1,validator:e=>e.every(t=>!!m[t])},inline:{type:Boolean,required:!1,default:!1},countdown:{type:Boolean,required:!1,default:!1}},data(){return{diff:void 0,interval:void 0}},computed:{selectedUnitsComputed(){if(!this.selectedUnits||this.selectedUnits.length===0){const e=["years","months","days","hours","minutes","seconds"];let t=[];return e.forEach(s=>this.unitSignificant(s)?t.push(s):t),t.length<=3?["hours","minutes","seconds"]:(t=t.slice(0,3),t)}return this.selectedUnits},isPast(){if(this.targetDateTime){const e=i(new Date);if(i(new Date(this.targetDateTime.replace(/\s+/g,"T"))).millisecond(0).isBefore(e))return!0}return!1}},mounted(){const e=i(new Date(this.targetDateTime.replace(/\s+/g,"T"))).millisecond(0);this.diff=p(e),(this.selectedUnitsComputed.includes("seconds")||this.selectedUnitsComputed.includes("minutes"))&&(this.interval=setInterval(()=>{var l;this.diff=p(e),((l=this.diff)==null?void 0:l.as("seconds"))===0&&clearInterval(this.interval)},1e3))},beforeUnmount(){clearInterval(this.interval)},methods:{shortLabel(e){var t;return((t=m[e])==null?void 0:t.shortLabel)||e},longLabel(e){var t;return((t=m[e])==null?void 0:t.longLabel)||e},unitSignificant(e){var s;if(this.diff===null)return!1;const t=(s=this.diff)==null?void 0:s.get(e);return!!(t&&t>0||this.checkOtherUnits(e))},checkOtherUnits(e){if(this.diff){if(e==="seconds"){if(this.diff.get("minutes")>0||this.diff.get("hours")>0||this.diff.get("days")>0||this.diff.get("months")>0||this.diff.get("years")>0)return!0}else if(e==="minutes"){if(this.diff.get("hours")>0||this.diff.get("days")>0||this.diff.get("months")>0||this.diff.get("years")>0)return!0}else if(e==="hours"){if(this.diff.get("days")>0||this.diff.get("months")>0||this.diff.get("years")>0)return!0}else if(e==="days"){if(this.diff.get("months")>0||this.diff.get("years")>0)return!0}else if(e==="months"&&this.diff.get("years")>0)return!0}return!1},unitValue(e){var s;if(this.diff===null)return"";const t=(s=this.diff)==null?void 0:s.get(e);return t==null?void 0:t.toString().padStart(2,"0")}}}),S=["hidden"],L={key:0};function U(e,t,s,l,B,C){return a(),w(D(e.diff?"time":"div"),{class:r(["BaseTimer whitespace-nowrap block",{"-inline":e.inline}]),datetime:e.diff?e.diff.toISOString():null,"data-chromatic":"ignore"},{default:v(()=>[d("span",{hidden:!!e.diff},"Loading…",8,S),d("span",{class:r(["transition-opacity duration-500 ease-in-out opacity-0",{"opacity-100":e.diff,"flex justify-between":e.inline}])},[(a(!0),o(c,null,T(e.selectedUnitsComputed,(n,g)=>(a(),o("span",{key:n},[g!==0?(a(),o("span",{key:0,class:r(["text-stats-xl text-stats-separator",{"block invisible -mt-6 md:inline md:visible md:mt-0":e.selectedUnitsComputed.length>=4&&n==="hours"}])}," : ",2)):u("",!0),d("span",{class:r(["inline-block align-top",n==="seconds"?"text-left":"text-center"]),"aria-hidden":"true"},[d("span",{class:r(["text-stats-xl",{"text-seconds":n==="seconds"}]),"data-chromatic":"ignore"},[e.countdown&&e.isPast?(a(),o(c,{key:0},[f("00")],64)):(a(),o(c,{key:1},[f(h(e.unitValue(n)),1)],64))],2),e.inline?u("",!0):(a(),o("br",L)),d("span",{class:r(["unit font-secondary text-xs uppercase",{"pl-2":n==="seconds"}]),"data-chromatic":"ignore"},h(e.shortLabel(n)),3)],2)]))),128))],2)]),_:1},8,["datetime","class"])}const I=k(y,[["render",U]]);y.__docgenInfo={exportName:"default",displayName:"BaseTimer",type:1,props:[{name:"inline",global:!1,description:"If time and units should all appear on one line",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]},default:"false"},{name:"countdown",global:!1,description:"If this is a countdown clock, the timer will start `now()` and count down to 0 when it reaches the `targetDateTime`)",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]},default:"false"},{name:"key",global:!0,description:"",tags:[],required:!1,type:"PropertyKey",declarations:[],schema:{kind:"enum",type:"PropertyKey",schema:["string","number","symbol"]}},{name:"ref",global:!0,description:"",tags:[],required:!1,type:"VNodeRef",declarations:[],schema:{kind:"enum",type:"VNodeRef",schema:["string","Ref<any, any>",{kind:"event",type:"(ref: Element | ComponentPublicInstance<{}, {}, {}, {}, {}, {}, {}, {}, false, ComponentOptionsBase<any, any, any, any, any, any, any, any, any, {}, {}, string, {}, {}, {}, string, ComponentProvideOptions>, ... 4 more ..., any>, refs: Record<...>): void"}]}},{name:"ref_for",global:!0,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"ref_key",global:!0,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string"},{name:"class",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"},{name:"style",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"},{name:"targetDateTime",global:!1,description:"Start time or goal time (depends if it's a countdown or not). Format: `YYYY-MM-DD HH:MM:SS+01:00`",tags:[],required:!0,type:"string",declarations:[],schema:"string"},{name:"selectedUnits",global:!1,description:"If blank, the first three applicable time units will show",tags:[],required:!1,type:'("years" | "months" | "days" | "hours" | "minutes" | "seconds")[]',declarations:[],schema:{kind:"array",type:'("years" | "months" | "days" | "hours" | "minutes" | "seconds")[]'}}],events:[],slots:[],exposed:[{name:"inline",type:"boolean",description:"If time and units should all appear on one line",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"countdown",type:"boolean",description:"If this is a countdown clock, the timer will start `now()` and count down to 0 when it reaches the `targetDateTime`)",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"targetDateTime",type:"string",description:"Start time or goal time (depends if it's a countdown or not). Format: `YYYY-MM-DD HH:MM:SS+01:00`",declarations:[],schema:"string"},{name:"selectedUnits",type:'("years" | "months" | "days" | "hours" | "minutes" | "seconds")[]',description:"If blank, the first three applicable time units will show",declarations:[],schema:{kind:"array",type:'("years" | "months" | "days" | "hours" | "minutes" | "seconds")[]'}},{name:"diff",type:"Duration",description:"",declarations:[],schema:{kind:"object",type:"Duration"}},{name:"interval",type:"{ ref: () => Timeout; unref: () => Timeout; hasRef: () => boolean; refresh: () => Timeout; [Symbol.toPrimitive]: () => number; [Symbol.dispose]: () => void; }",description:"",declarations:[],schema:"{ ref: () => Timeout; unref: () => Timeout; hasRef: () => boolean; refresh: () => Timeout; [Symbol.toPrimitive]: () => number; [Symbol.dispose]: () => void; }"},{name:"selectedUnitsComputed",type:'("years" | "months" | "days" | "hours" | "minutes" | "seconds")[]',description:"",declarations:[],schema:{kind:"array",type:'("years" | "months" | "days" | "hours" | "minutes" | "seconds")[]'}},{name:"isPast",type:"boolean",description:"",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}}],sourceFiles:"/home/runner/work/explorer-1/explorer-1/packages/vue/src/components/BaseTimer/BaseTimer.vue"};export{I as B};
