import{c as b,P as n,_ as v,o as i,m as L,w as U,i as l,h as r,j as w,n as d,p as c,F as f,L as h,t as m,E as T}from"./iframe-9cocL7nB.js";const p=e=>{const t=n().millisecond(0),s=n.max(e,t),o=n.min(e,t);return s?n.duration(s.diff(o)):void 0},u={years:{shortLabel:"Yrs",longLabel:"Years"},months:{shortLabel:"Mos",longLabel:"Months"},days:{shortLabel:"Days",longLabel:"Days"},hours:{shortLabel:"Hrs",longLabel:"Hours"},minutes:{shortLabel:"Mins",longLabel:"Minutes"},seconds:{shortLabel:"Secs",longLabel:"Seconds"}},g=b({name:"BaseTimer",props:{targetDateTime:{type:String,required:!0},selectedUnits:{type:Array,required:!1,validator:e=>e.every(t=>!!u[t])},inline:{type:Boolean,required:!1,default:!1},countdown:{type:Boolean,required:!1,default:!1}},data(){return{diff:void 0,interval:void 0}},computed:{selectedUnitsComputed(){if(!this.selectedUnits||this.selectedUnits.length===0){const e=["years","months","days","hours","minutes","seconds"];let t=[];return e.forEach(s=>this.unitSignificant(s)?t.push(s):t),t.length<=3?["hours","minutes","seconds"]:(t=t.slice(0,3),t)}return this.selectedUnits},isPast(){if(this.targetDateTime){const e=n(new Date);if(n(new Date(this.targetDateTime.replace(/\s+/g,"T"))).millisecond(0).isBefore(e))return!0}return!1}},mounted(){const e=n(new Date(this.targetDateTime.replace(/\s+/g,"T"))).millisecond(0);this.diff=p(e),(this.selectedUnitsComputed.includes("seconds")||this.selectedUnitsComputed.includes("minutes"))&&(this.interval=setInterval(()=>{var o;this.diff=p(e),((o=this.diff)==null?void 0:o.as("seconds"))===0&&clearInterval(this.interval)},1e3))},beforeUnmount(){clearInterval(this.interval)},methods:{shortLabel(e){var t;return((t=u[e])==null?void 0:t.shortLabel)||e},longLabel(e){var t;return((t=u[e])==null?void 0:t.longLabel)||e},unitSignificant(e){var s;if(this.diff===null)return!1;const t=(s=this.diff)==null?void 0:s.get(e);return!!(t&&t>0||this.checkOtherUnits(e))},checkOtherUnits(e){if(this.diff){if(e==="seconds"){if(this.diff.get("minutes")>0||this.diff.get("hours")>0||this.diff.get("days")>0||this.diff.get("months")>0||this.diff.get("years")>0)return!0}else if(e==="minutes"){if(this.diff.get("hours")>0||this.diff.get("days")>0||this.diff.get("months")>0||this.diff.get("years")>0)return!0}else if(e==="hours"){if(this.diff.get("days")>0||this.diff.get("months")>0||this.diff.get("years")>0)return!0}else if(e==="days"){if(this.diff.get("months")>0||this.diff.get("years")>0)return!0}else if(e==="months"&&this.diff.get("years")>0)return!0}return!1},unitValue(e){var s;if(this.diff===null)return"";const t=(s=this.diff)==null?void 0:s.get(e);return t==null?void 0:t.toString().padStart(2,"0")}}}),k=["hidden"],B={key:0},D={class:"unit text-body-xs uppercase","data-chromatic":"ignore"};function C(e,t,s,o,x,S){return i(),L(T(e.diff?"time":"div"),{class:d(["BaseTimer whitespace-nowrap block",{"-inline":e.inline}]),datetime:e.diff?e.diff.toISOString():null,"data-chromatic":"ignore"},{default:U(()=>[l("span",{hidden:!!e.diff},"Loading…",8,k),l("span",{class:d(["transition-opacity duration-500 ease-in-out opacity-0",{"opacity-100":e.diff,"flex justify-between":e.inline}])},[(i(!0),r(f,null,w(e.selectedUnitsComputed,(a,y)=>(i(),r("span",{key:a},[y!==0?(i(),r("span",{key:0,class:d(["text-stats-xl text-stats-separator",{"block invisible -mt-6 md:inline md:visible md:mt-0":e.selectedUnitsComputed.length>=4&&a==="hours"}])}," : ",2)):c("",!0),l("span",{class:d(["inline-block align-top",a==="seconds"?"text-left":"text-center"]),"aria-hidden":"true"},[l("span",{class:d(["text-stats-xl",{"text-seconds":a==="seconds"}]),"data-chromatic":"ignore"},[e.countdown&&e.isPast?(i(),r(f,{key:0},[h("00")],64)):(i(),r(f,{key:1},[h(m(e.unitValue(a)),1)],64))],2),e.inline?c("",!0):(i(),r("br",B)),l("span",D,m(e.shortLabel(a)),1)],2)]))),128))],2)]),_:1},8,["datetime","class"])}const V=v(g,[["render",C]]);g.__docgenInfo={displayName:"BaseTimer",exportName:"default",description:"",tags:{},props:[{name:"targetDateTime",type:{name:"string"},required:!0},{name:"selectedUnits",type:{name:"UnitID[]"},required:!1},{name:"inline",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"countdown",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}}],sourceFiles:["/home/runner/work/explorer-1/explorer-1/apps/vue-storybook/node_modules/@explorer-1/vue/src/components/BaseTimer/BaseTimer.vue"]};export{V as B};
