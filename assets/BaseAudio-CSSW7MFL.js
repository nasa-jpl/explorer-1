import{a as _,_ as k,s as n,o as i,g as o,h as a,y as r,Q as w,p,t as m,n as I}from"./iframe-G_CakBWE.js";import{I as x}from"./IconPlay-DTZFh8Kl.js";import{I as V,a as M,b as B,c as T,d as A}from"./IconForwardTen-DG8CXkk4.js";const S=10,E=()=>"xxxxxxxx-xxxx-4xxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),c=e=>{const t=new Date(e*1e3).toISOString().substr(11,8);return t.indexOf("00:")===0?t.substr(3):t},h=_({name:"BaseAudio",components:{IconPlay:x,IconPause:V,IconVolume:M,IconMute:B,IconRewindTen:T,IconForwardTen:A},props:{file:{type:String,default:null},autoPlay:{type:Boolean,default:!1}},data(){return{firstPlay:!0,isMuted:!1,loaded:!1,playing:!1,paused:!0,progressStyle:"",currentTime:"00:00",uuid:"0",audio:void 0,totalDuration:0,hideVolumeSlider:!1,volumeValue:S}},computed:{duration(){return this.audio?c(this.totalDuration):""},playerId(){return"player-"+this.uuid}},mounted(){this.uuid=E(),this.audio=this.getAudio(),this.init()},beforeUnmount(){this.audio&&(this.audio.removeEventListener("timeupdate",this._handlePlayingUI),this.audio.removeEventListener("loadeddata",this._handleLoaded),this.audio.removeEventListener("pause",this._handlePlayPause),this.audio.removeEventListener("play",this._handlePlayPause))},methods:{setPosition:function(t){if(this.audio){const l=t.target;if(this.paused||t.target.tagName==="SPAN")return;const d=l.getBoundingClientRect(),u=(t.clientX-d.left)/d.width;this.audio.currentTime=this.audio.duration*u}},updateVolume(){this.audio&&(this.hideVolumeSlider=!1,this.audio.volume=this.volumeValue/100,this.volumeValue/100>0&&(this.isMuted=this.audio.muted=!1),this.volumeValue/100===0&&(this.isMuted=this.audio.muted=!0))},toggleVolume(){this.hideVolumeSlider=!0},stop(){this.audio&&(this.playing=!1,this.paused=!0,this.audio.pause(),this.audio.currentTime=0)},play(){var e;this.playing&&!this.paused||this.audio&&(this.paused=!1,this.audio.play(),this.playing=!0,(e=this.$root)==null||e.$emit("play",this.uuid))},forward(e){return this.audio?this.audio.currentTime+=e:void 0},rewind(e){return this.audio?this.audio.currentTime-=e:void 0},pause(){this.audio&&(this.paused=!this.paused,this.paused?this.audio.pause():this.audio.play())},pauseOthers(e){this.audio&&this.uuid!==e&&(this.paused=!0,this.audio.pause())},toggleMute(){this.audio&&(this.isMuted=!this.isMuted,this.audio.muted=this.isMuted,this.volumeValue=this.isMuted?0:100)},_handleLoaded(){if(this.audio&&this.audio.readyState>=2)this.autoPlay&&this.play(),this.loaded=!0,this.totalDuration=this.audio.duration;else throw new Error("Failed to load audio file")},_handlePlayingUI(e){if(this.audio){const t=this.audio.currentTime,l=t/this.totalDuration*100;this.progressStyle=`width: ${l}%;`,this.currentTime=c(t)}},_handlePlayPause(e){this.audio&&e.type==="play"&&this.firstPlay&&(this.audio.currentTime=0,this.firstPlay&&(this.firstPlay=!1)),e.type==="pause"&&this.playing===!1&&(this.progressStyle="width:0%",this.currentTime="00:00",this.paused=!0)},_handleEnded(){this.paused=this.playing=!1},init(){this.audio&&(this.audio.addEventListener("timeupdate",this._handlePlayingUI),this.audio.addEventListener("loadeddata",this._handleLoaded),this.audio.addEventListener("pause",this._handlePlayPause),this.audio.addEventListener("play",this._handlePlayPause),this.audio.addEventListener("ended",this._handleEnded))},getAudio(){return this.$el.querySelectorAll("audio")[0]}}}),C={class:"BaseAudio"},$={class:"BaseAudio__stage sm:pr-5"},L={class:"BaseAudio__player w-full select-none"},R={class:"flex flex-row w-full"},q={class:"z-30 text-sm md:text-base"},N={class:"flex flex-col w-full z-20"},D={class:"flex flex-row text-white"},F={class:"flex flex-row justify-between w-full py-1.5 px-3"},U={class:"BaseAudio__playback-time-current text-sm md:text-base pr-1 md:pr-3 text-left"},j={key:0,class:"BaseAudio__rewind-forward animate-fadeIn"},O={class:"BaseAudio__playback-time-total"},z=["id","src"];function H(e,t,l,d,u,K){const y=n("IconPlay"),f=n("IconPause"),g=n("IconRewindTen"),b=n("IconForwardTen"),v=n("IconMute"),P=n("IconVolume");return i(),o("div",C,[a("div",$,[a("div",L,[a("div",R,[a("div",q,[e.paused?(i(),o("button",{key:0,class:"cursor-pointer",title:"Play","aria-label":"Play",onClick:t[0]||(t[0]=s=>e.play())},[r(y,{class:"bg-jpl-red text-white"})])):(i(),o("button",{key:1,class:"cursor-pointer",title:"Pause","aria-label":"Pause",onClick:t[1]||(t[1]=s=>e.pause())},[r(f,{class:"bg-jpl-red text-white"})]))]),a("div",N,[a("div",{class:"BaseAudio__playback-time-wrapper cursor-pointer relative inline-block w-full border-t border-jpl-red bg-gray-mid bg-opacity-25 h-2",title:"Playback Position",onClick:t[2]||(t[2]=(...s)=>e.setPosition&&e.setPosition(...s))},[e.playing?(i(),o("div",{key:0,style:w(e.progressStyle),class:"BaseAudio__playback-time-indicator bg-jpl-red transition-all transform-gpu duration-50 absolute top-0 left-0 bottom-0 h-2"},null,4)):p("",!0)]),a("div",D,[a("div",F,[a("span",U,m(e.currentTime),1),e.playing?(i(),o("div",j,[a("button",{class:"cursor-pointer",title:"Rewind","aria-label":"Rewind 10 seconds",onClick:t[3]||(t[3]=s=>e.rewind(10))},[r(g)]),a("button",{class:"cursor-pointer",title:"Fast Forward","aria-label":"Fast-forward 10 seconds",onClick:t[4]||(t[4]=s=>e.forward(10))},[r(b)])])):p("",!0),a("span",O,m(e.duration),1)]),a("div",{class:I(["BaseAudio__extern-wrapper flex flex-row",e.playing?"-mt-1.5 sm:-mt-0.5 md:mt-0 lg:-mt-0.5":"-mt-1.5 sm:mt-0.5 md:mt-1 lg:mt-1.5"])},[e.isMuted?(i(),o("button",{key:0,class:"cursor-pointer",title:"Unmute","aria-label":"Unmute",onClick:t[5]||(t[5]=s=>e.toggleMute())},[r(v)])):(i(),o("button",{key:1,class:"cursor-pointer",title:"Mute","aria-label":"Mute",onClick:t[6]||(t[6]=s=>e.toggleMute())},[r(P)]))],2)])])])]),a("audio",{id:e.playerId,ref:"player",src:e.file,preload:"auto",class:"hidden min-w-full left-0 right-0"},null,8,z)]),a("a",{class:"volume-toggle absolute right-5 -bottom-4",title:"Volume",onMouseover:t[7]||(t[7]=s=>e.toggleVolume())},null,32)])}const J=k(h,[["render",H]]);h.__docgenInfo={exportName:"default",displayName:"BaseAudio",type:1,props:[{name:"file",global:!1,description:"Path to audio file",tags:[],required:!1,type:"string",declarations:[],schema:"string",default:"null"},{name:"autoPlay",global:!1,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]},default:"false"},{name:"key",global:!0,description:"",tags:[],required:!1,type:"PropertyKey",declarations:[],schema:{kind:"enum",type:"PropertyKey",schema:["string","number","symbol"]}},{name:"ref",global:!0,description:"",tags:[],required:!1,type:"VNodeRef",declarations:[],schema:{kind:"enum",type:"VNodeRef",schema:["string","Ref<any, any>",{kind:"event",type:"(ref: Element | ComponentPublicInstance<{}, {}, {}, {}, {}, {}, {}, {}, false, ComponentOptionsBase<any, any, any, any, any, any, any, any, any, {}, {}, string, {}, {}, {}, string, ComponentProvideOptions>, ... 4 more ..., any>, refs: Record<...>): void"}]}},{name:"ref_for",global:!0,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"ref_key",global:!0,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string"},{name:"class",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"},{name:"style",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"}],events:[],slots:[],exposed:[{name:"file",type:"string",description:"Path to audio file",declarations:[],schema:"string"},{name:"autoPlay",type:"boolean",description:"",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"firstPlay",type:"boolean",description:"",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"isMuted",type:"boolean",description:"",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"loaded",type:"boolean",description:"",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"playing",type:"boolean",description:"",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"paused",type:"boolean",description:"",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"progressStyle",type:"string",description:"",declarations:[],schema:"string"},{name:"currentTime",type:"string",description:"",declarations:[],schema:"string"},{name:"uuid",type:"string",description:"",declarations:[],schema:"string"},{name:"audio",type:"HTMLAudioElement",description:"",declarations:[],schema:{kind:"object",type:"HTMLAudioElement"}},{name:"totalDuration",type:"number",description:"",declarations:[],schema:"number"},{name:"hideVolumeSlider",type:"boolean",description:"",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"volumeValue",type:"number",description:"",declarations:[],schema:"number"},{name:"duration",type:"string",description:"",declarations:[],schema:"string"},{name:"playerId",type:"string",description:"",declarations:[],schema:"string"}],sourceFiles:"/home/runner/work/explorer-1/explorer-1/packages/vue/src/components/BaseAudio/BaseAudio.vue"};export{J as B};
