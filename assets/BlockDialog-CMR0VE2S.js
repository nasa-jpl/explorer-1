import{h as E,e as w,f as k,j as c,n as x,B as C,k as A,C as D,y as I,E as T,o as L}from"./iframe-Cbo-gMoN.js";import{I as F}from"./IconClose-BO1gWqBk.js";const n={inert:":not([inert]):not([inert] *)",negTabIndex:':not([tabindex^="-"])',disabled:":not(:disabled)"};var B=[`a[href]${n.inert}${n.negTabIndex}`,`area[href]${n.inert}${n.negTabIndex}`,`input:not([type="hidden"]):not([type="radio"])${n.inert}${n.negTabIndex}${n.disabled}`,`input[type="radio"]${n.inert}${n.negTabIndex}${n.disabled}`,`select${n.inert}${n.negTabIndex}${n.disabled}`,`textarea${n.inert}${n.negTabIndex}${n.disabled}`,`button${n.inert}${n.negTabIndex}${n.disabled}`,`details${n.inert} > summary:first-of-type${n.negTabIndex}`,`iframe${n.inert}${n.negTabIndex}`,`audio[controls]${n.inert}${n.negTabIndex}`,`video[controls]${n.inert}${n.negTabIndex}`,`[contenteditable]${n.inert}${n.negTabIndex}`,`[tabindex]${n.inert}${n.negTabIndex}`];function h(t){(t.querySelector("[autofocus]")||t).focus()}function q(t){const e=l(t,!0),i=e?l(t,!1)||e:null;return[e,i]}function l(t,e){if(e&&p(t))return t;if(S(t))if(t.shadowRoot){let i=f(t.shadowRoot,e);for(;i;){const s=l(i,e);if(s)return s;i=g(i,e)}}else if(t.localName==="slot"){const i=t.assignedElements({flatten:!0});e||i.reverse();for(const s of i){const o=l(s,e);if(o)return o}}else{let i=f(t,e);for(;i;){const s=l(i,e);if(s)return s;i=g(i,e)}}return!e&&p(t)?t:null}function f(t,e){return e?t.firstElementChild:t.lastElementChild}function g(t,e){return e?t.nextElementSibling:t.previousElementSibling}const N=t=>t.matches("details:not([open]) *")&&!t.matches("details>summary:first-of-type")?!0:!(t.offsetWidth||t.offsetHeight||t.getClientRects().length),p=t=>t.shadowRoot?.delegatesFocus?!1:t.matches(B.join(","))&&!N(t);function S(t){return t.shadowRoot&&t.getAttribute("tabindex")==="-1"?!1:!t.matches(":disabled,[hidden],[inert]")}function d(t=document){const e=t.activeElement;return e?e.shadowRoot?d(e.shadowRoot)||document.activeElement:e:null}function R(t,e){const[i,s]=q(t);if(!i)return e.preventDefault();const o=d();e.shiftKey&&o===i?(s.focus(),e.preventDefault()):!e.shiftKey&&o===s&&(i.focus(),e.preventDefault())}function a(t,e){function i(s){if(!s||s===document||s===window)return null;const o=m(s);return o&&(s=o),s.closest(t)||i(s.getRootNode().host)}return i(e)}function m(t){return t.assignedSlot||(t.parentNode?m(t.parentNode):null)}const r="data-a11y-dialog";class b{$el;id;previouslyFocused;shown;constructor(e){this.$el=e,this.id=this.$el.getAttribute(r)||this.$el.id,this.previouslyFocused=null,this.shown=!1,this.maintainFocus=this.maintainFocus.bind(this),this.bindKeypress=this.bindKeypress.bind(this),this.handleTriggerClicks=this.handleTriggerClicks.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.$el.setAttribute("aria-hidden","true"),this.$el.setAttribute("aria-modal","true"),this.$el.setAttribute("tabindex","-1"),this.$el.hasAttribute("role")||this.$el.setAttribute("role","dialog"),document.addEventListener("click",this.handleTriggerClicks,!0)}destroy(){return this.fire("destroy").defaultPrevented?this:(this.hide(),document.removeEventListener("click",this.handleTriggerClicks,!0),this.$el.replaceWith(this.$el.cloneNode(!0)),this)}show(e){return this.shown?this:this.fire("show",e).defaultPrevented?this:(this.shown=!0,this.$el.removeAttribute("aria-hidden"),this.previouslyFocused=d(),this.previouslyFocused?.tagName==="BODY"&&e?.target&&(this.previouslyFocused=e.target),e?.type==="focus"?this.maintainFocus():h(this.$el),document.body.addEventListener("focus",this.maintainFocus,!0),this.$el.addEventListener("keydown",this.bindKeypress,!0),this)}hide(e){return this.shown?this.fire("hide",e).defaultPrevented?this:(this.shown=!1,this.$el.setAttribute("aria-hidden","true"),document.body.removeEventListener("focus",this.maintainFocus,!0),this.$el.removeEventListener("keydown",this.bindKeypress,!0),this.previouslyFocused?.focus?.(),this):this}on(e,i,s){return this.$el.addEventListener(e,i,s),this}off(e,i,s){return this.$el.removeEventListener(e,i,s),this}fire(e,i){const s=new CustomEvent(e,{detail:i,cancelable:!0});return this.$el.dispatchEvent(s),s}handleTriggerClicks(e){const i=e.composedPath()[0],s=a(`[${r}-show="${this.id}"]`,i),o=a(`[${r}-hide="${this.id}"]`,i),u=a(`[${r}-hide]`,i)&&a('[aria-modal="true"]',i)===this.$el;s&&this.show(e),(o||u)&&this.hide(e)}bindKeypress(e){if(a('[aria-modal="true"]',d())!==this.$el)return;let i=!1;try{i=!!this.$el.querySelector('[popover]:not([popover="manual"]):popover-open')}catch{}e.key==="Escape"&&this.$el.getAttribute("role")!=="alertdialog"&&!i&&(e.preventDefault(),this.hide(e)),e.key==="Tab"&&R(this.$el,e)}maintainFocus(){const e=d();a(`[aria-modal="true"], [${r}-ignore-focus-trap]`,e)||h(this.$el)}}function y(){for(const t of document.querySelectorAll("[data-a11y-dialog]"))new b(t)}typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",y):y());const v=E({name:"BlockDialog",components:{IconClose:F},props:{dialogId:{type:String,required:!0},headingId:{type:String,required:!1,default:""},overlayClose:{type:Boolean,required:!1,default:!0},dialogBoxClass:{type:String,required:!1,default:""}},emits:["show","hide"],data(){return{dialog:null,content:null}},mounted(){this.init(),this.dialog.show()},beforeUnmount(){this.dialog&&this.dialog.destroy()},methods:{init(){this.dialog=this.$refs.DialogRef?new b(this.$refs.DialogRef):null,this.dialog&&this.dialog.on("show",()=>{document.body.classList.add("overflow-hidden"),this.$emit("show")}).on("hide",()=>{document.body.classList.remove("overflow-hidden"),this.$emit("hide")})}}}),_=["id","aria-labelledby"],K=["data-a11y-dialog-hide"],O={class:"container px-4 m-auto"},P={type:"button","data-a11y-dialog-hide":"","aria-label":"Close dialog",class:"button-close absolute right-0 flex-shrink-0 text-white focus:outline-none focus:ring-2"};function H(t,e,i,s,o,u){const $=T("IconClose");return t.dialogId?(L(),k("div",{key:0,id:t.dialogId,ref:"DialogRef","aria-labelledby":t.headingId,"aria-hidden":"true",class:"BlockDialog fixed top-0 left-0 z-60 flex w-full h-full overflow-auto"},[c("div",{class:"dialog-overlay bg-gray-dark bg-opacity-90 fixed top-0 left-0 w-full h-full","data-a11y-dialog-hide":t.overlayClose?"":void 0},null,8,K),c("div",O,[c("div",{role:"document",class:x(["dialog-box relative m-auto bg-white",t.dialogBoxClass])},[c("button",P,[C($)]),A(t.$slots,"default",{},()=>[e[0]||(e[0]=D("Content",-1))])],2)])],8,_)):I("",!0)}const M=w(v,[["render",H]]);v.__docgenInfo={exportName:"default",displayName:"BlockDialog",type:1,props:[{name:"headingId",global:!1,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string",default:'""'},{name:"overlayClose",global:!1,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]},default:"true"},{name:"dialogBoxClass",global:!1,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string",default:'""'},{name:"key",global:!0,description:"",tags:[],required:!1,type:"PropertyKey",declarations:[],schema:{kind:"enum",type:"PropertyKey",schema:["string","number","symbol"]}},{name:"ref",global:!0,description:"",tags:[],required:!1,type:"VNodeRef",declarations:[],schema:{kind:"enum",type:"VNodeRef",schema:["string","Ref<any, any>",{kind:"event",type:"(ref: Element | ComponentPublicInstance<{}, {}, {}, {}, {}, {}, {}, {}, false, ComponentOptionsBase<any, any, any, any, any, any, any, any, any, {}, {}, string, {}, {}, {}, string, ComponentProvideOptions>, ... 4 more ..., any>, refs: Record<...>): void"}]}},{name:"ref_for",global:!0,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"ref_key",global:!0,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string"},{name:"class",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"},{name:"style",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"},{name:"dialogId",global:!1,description:"",tags:[],required:!0,type:"string",declarations:[],schema:"string"}],events:[],slots:[],exposed:[{name:"headingId",type:"string",description:"",declarations:[],schema:"string"},{name:"overlayClose",type:"boolean",description:"",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"dialogBoxClass",type:"string",description:"",declarations:[],schema:"string"},{name:"dialogId",type:"string",description:"",declarations:[],schema:"string"},{name:"onShow",type:"(...args: any[]) => any",description:"",declarations:[],schema:{kind:"event",type:"(...args: any[]): any"}},{name:"onHide",type:"(...args: any[]) => any",description:"",declarations:[],schema:{kind:"event",type:"(...args: any[]): any"}},{name:"dialog",type:"{ shown: boolean; destroy: () => A11yDialog; show: (event?: Event) => A11yDialog; hide: (event?: Event) => A11yDialog; on: (type: A11yDialogEvent, handler: EventListener, options?: AddEventListenerOptions) => A11yDialog; off: (type: A11yDialogEvent, handler: EventListener, options?: AddEventListenerOptions) => A11yD...",description:"",declarations:[],schema:"{ shown: boolean; destroy: () => A11yDialog; show: (event?: Event) => A11yDialog; hide: (event?: Event) => A11yDialog; on: (type: A11yDialogEvent, handler: EventListener, options?: AddEventListenerOptions) => A11yDialog; off: (type: A11yDialogEvent, handler: EventListener, options?: AddEventListenerOptions) => A11yD..."},{name:"content",type:"HTMLElement",description:"",declarations:[],schema:{kind:"object",type:"HTMLElement"}}],sourceFiles:"/home/runner/work/explorer-1/explorer-1/packages/vue/src/components/BlockDialog/BlockDialog.vue"};export{M as B};
