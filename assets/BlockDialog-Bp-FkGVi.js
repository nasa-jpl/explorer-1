var v=Object.defineProperty;var $=(t,e,i)=>e in t?v(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var a=(t,e,i)=>$(t,typeof e!="symbol"?e+"":e,i);import{a as E,_ as w,s as k,o as x,g as C,h as d,n as A,y as D,i as I,z as T,p as L}from"./iframe-DU5B84vZ.js";import{I as F}from"./IconClose-1kbOjIg2.js";const s={inert:":not([inert]):not([inert] *)",negTabIndex:':not([tabindex^="-"])',disabled:":not(:disabled)"};var q=[`a[href]${s.inert}${s.negTabIndex}`,`area[href]${s.inert}${s.negTabIndex}`,`input:not([type="hidden"]):not([type="radio"])${s.inert}${s.negTabIndex}${s.disabled}`,`input[type="radio"]${s.inert}${s.negTabIndex}${s.disabled}`,`select${s.inert}${s.negTabIndex}${s.disabled}`,`textarea${s.inert}${s.negTabIndex}${s.disabled}`,`button${s.inert}${s.negTabIndex}${s.disabled}`,`details${s.inert} > summary:first-of-type${s.negTabIndex}`,`iframe${s.inert}${s.negTabIndex}`,`audio[controls]${s.inert}${s.negTabIndex}`,`video[controls]${s.inert}${s.negTabIndex}`,`[contenteditable]${s.inert}${s.negTabIndex}`,`[tabindex]${s.inert}${s.negTabIndex}`];function u(t){(t.querySelector("[autofocus]")||t).focus()}function B(t){const e=l(t,!0),i=e?l(t,!1)||e:null;return[e,i]}function l(t,e){if(e&&g(t))return t;if(R(t))if(t.shadowRoot){let i=h(t.shadowRoot,e);for(;i;){const n=l(i,e);if(n)return n;i=f(i,e)}}else if(t.localName==="slot"){const i=t.assignedElements({flatten:!0});e||i.reverse();for(const n of i){const o=l(n,e);if(o)return o}}else{let i=h(t,e);for(;i;){const n=l(i,e);if(n)return n;i=f(i,e)}}return!e&&g(t)?t:null}function h(t,e){return e?t.firstElementChild:t.lastElementChild}function f(t,e){return e?t.nextElementSibling:t.previousElementSibling}const S=t=>t.matches("details:not([open]) *")&&!t.matches("details>summary:first-of-type")?!0:!(t.offsetWidth||t.offsetHeight||t.getClientRects().length),g=t=>{var e;return(e=t.shadowRoot)!=null&&e.delegatesFocus?!1:t.matches(q.join(","))&&!S(t)};function R(t){return t.shadowRoot&&t.getAttribute("tabindex")==="-1"?!1:!t.matches(":disabled,[hidden],[inert]")}function c(t=document){const e=t.activeElement;return e?e.shadowRoot?c(e.shadowRoot)||document.activeElement:e:null}function _(t,e){const[i,n]=B(t);if(!i)return e.preventDefault();const o=c();e.shiftKey&&o===i?(n.focus(),e.preventDefault()):!e.shiftKey&&o===n&&(i.focus(),e.preventDefault())}function N(t,e){function i(n){return!n||n===document||n===window?null:(n.assignedSlot&&(n=n.assignedSlot),n.closest(t)||i(n.getRootNode().host))}return i(e)}const r="data-a11y-dialog";class y{constructor(e){a(this,"$el");a(this,"id");a(this,"previouslyFocused");a(this,"shown");this.$el=e,this.id=this.$el.getAttribute(r)||this.$el.id,this.previouslyFocused=null,this.shown=!1,this.maintainFocus=this.maintainFocus.bind(this),this.bindKeypress=this.bindKeypress.bind(this),this.handleTriggerClicks=this.handleTriggerClicks.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.$el.setAttribute("aria-hidden","true"),this.$el.setAttribute("aria-modal","true"),this.$el.setAttribute("tabindex","-1"),this.$el.hasAttribute("role")||this.$el.setAttribute("role","dialog"),document.addEventListener("click",this.handleTriggerClicks,!0)}destroy(){return this.fire("destroy").defaultPrevented?this:(this.hide(),document.removeEventListener("click",this.handleTriggerClicks,!0),this.$el.replaceWith(this.$el.cloneNode(!0)),this)}show(e){var n;return this.shown?this:this.fire("show",e).defaultPrevented?this:(this.shown=!0,this.$el.removeAttribute("aria-hidden"),this.previouslyFocused=c(),((n=this.previouslyFocused)==null?void 0:n.tagName)==="BODY"&&(e!=null&&e.target)&&(this.previouslyFocused=e.target),(e==null?void 0:e.type)==="focus"?this.maintainFocus(e):u(this.$el),document.body.addEventListener("focus",this.maintainFocus,!0),this.$el.addEventListener("keydown",this.bindKeypress,!0),this)}hide(e){var n,o;return this.shown?this.fire("hide",e).defaultPrevented?this:(this.shown=!1,this.$el.setAttribute("aria-hidden","true"),(o=(n=this.previouslyFocused)==null?void 0:n.focus)==null||o.call(n),document.body.removeEventListener("focus",this.maintainFocus,!0),this.$el.removeEventListener("keydown",this.bindKeypress,!0),this):this}on(e,i,n){return this.$el.addEventListener(e,i,n),this}off(e,i,n){return this.$el.removeEventListener(e,i,n),this}fire(e,i){const n=new CustomEvent(e,{detail:i,cancelable:!0});return this.$el.dispatchEvent(n),n}handleTriggerClicks(e){const i=e.composedPath()[0];i.closest(`[${r}-show="${this.id}"]`)&&this.show(e),(i.closest(`[${r}-hide="${this.id}"]`)||i.closest(`[${r}-hide]`)&&i.closest('[aria-modal="true"]')===this.$el)&&this.hide(e)}bindKeypress(e){if(N('[aria-modal="true"]',c())!==this.$el)return;let i=!1;try{i=!!this.$el.querySelector('[popover]:not([popover="manual"]):popover-open')}catch{}e.key==="Escape"&&this.$el.getAttribute("role")!=="alertdialog"&&!i&&(e.preventDefault(),this.hide(e)),e.key==="Tab"&&_(this.$el,e)}maintainFocus(e){e.target.closest(`[aria-modal="true"], [${r}-ignore-focus-trap]`)||u(this.$el)}}function p(){for(const t of document.querySelectorAll("[data-a11y-dialog]"))new y(t)}typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",p):p());const m=E({name:"BlockDialog",components:{IconClose:F},props:{dialogId:{type:String,required:!0},headingId:{type:String,required:!1,default:""},overlayClose:{type:Boolean,required:!1,default:!0},dialogBoxClass:{type:String,required:!1,default:""}},emits:["show","hide"],data(){return{dialog:null,content:null}},mounted(){this.init(),this.dialog.show()},beforeUnmount(){this.dialog&&this.dialog.destroy()},methods:{init(){this.dialog=this.$refs.DialogRef?new y(this.$refs.DialogRef):null,this.dialog&&this.dialog.on("show",()=>{document.body.classList.add("overflow-hidden"),this.$emit("show")}).on("hide",()=>{document.body.classList.remove("overflow-hidden"),this.$emit("hide")})}}}),K=["id","aria-labelledby"],O=["data-a11y-dialog-hide"],P={class:"container px-4 m-auto"},H={type:"button","data-a11y-dialog-hide":"","aria-label":"Close dialog",class:"button-close absolute right-0 flex-shrink-0 text-white focus:outline-none focus:ring-2"};function V(t,e,i,n,o,z){const b=k("IconClose");return t.dialogId?(x(),C("div",{key:0,id:t.dialogId,ref:"DialogRef","aria-labelledby":t.headingId,"aria-hidden":"true",class:"BlockDialog fixed top-0 left-0 z-60 flex w-full h-full overflow-auto"},[d("div",{class:"dialog-overlay bg-gray-dark bg-opacity-90 fixed top-0 left-0 w-full h-full","data-a11y-dialog-hide":t.overlayClose?"":void 0},null,8,O),d("div",P,[d("div",{role:"document",class:A(["dialog-box relative m-auto bg-white",t.dialogBoxClass])},[d("button",H,[D(b)]),I(t.$slots,"default",{},()=>[e[0]||(e[0]=T("Content"))])],2)])],8,K)):L("",!0)}const U=w(m,[["render",V]]);m.__docgenInfo={exportName:"default",displayName:"BlockDialog",type:1,props:[{name:"headingId",global:!1,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string",default:'""'},{name:"overlayClose",global:!1,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]},default:"true"},{name:"dialogBoxClass",global:!1,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string",default:'""'},{name:"key",global:!0,description:"",tags:[],required:!1,type:"PropertyKey",declarations:[],schema:{kind:"enum",type:"PropertyKey",schema:["string","number","symbol"]}},{name:"ref",global:!0,description:"",tags:[],required:!1,type:"VNodeRef",declarations:[],schema:{kind:"enum",type:"VNodeRef",schema:["string","Ref<any, any>",{kind:"event",type:"(ref: Element | ComponentPublicInstance<{}, {}, {}, {}, {}, {}, {}, {}, false, ComponentOptionsBase<any, any, any, any, any, any, any, any, any, {}, {}, string, {}, {}, {}, string, ComponentProvideOptions>, ... 4 more ..., any>, refs: Record<...>): void"}]}},{name:"ref_for",global:!0,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"ref_key",global:!0,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string"},{name:"class",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"},{name:"style",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"},{name:"dialogId",global:!1,description:"",tags:[],required:!0,type:"string",declarations:[],schema:"string"}],events:[],slots:[],exposed:[{name:"headingId",type:"string",description:"",declarations:[],schema:"string"},{name:"overlayClose",type:"boolean",description:"",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"dialogBoxClass",type:"string",description:"",declarations:[],schema:"string"},{name:"dialogId",type:"string",description:"",declarations:[],schema:"string"},{name:"onShow",type:"(...args: any[]) => any",description:"",declarations:[],schema:{kind:"event",type:"(...args: any[]): any"}},{name:"onHide",type:"(...args: any[]) => any",description:"",declarations:[],schema:{kind:"event",type:"(...args: any[]): any"}},{name:"dialog",type:"{ shown: boolean; destroy: () => A11yDialog; show: (event?: Event) => A11yDialog; hide: (event?: Event) => A11yDialog; on: (type: A11yDialogEvent, handler: EventListener, options?: AddEventListenerOptions) => A11yDialog; off: (type: A11yDialogEvent, handler: EventListener, options?: AddEventListenerOptions) => A11yD...",description:"",declarations:[],schema:"{ shown: boolean; destroy: () => A11yDialog; show: (event?: Event) => A11yDialog; hide: (event?: Event) => A11yDialog; on: (type: A11yDialogEvent, handler: EventListener, options?: AddEventListenerOptions) => A11yDialog; off: (type: A11yDialogEvent, handler: EventListener, options?: AddEventListenerOptions) => A11yD..."},{name:"content",type:"HTMLElement",description:"",declarations:[],schema:{kind:"object",type:"HTMLElement"}}],sourceFiles:"/home/runner/work/explorer-1/explorer-1/packages/vue/src/components/BlockDialog/BlockDialog.vue"};export{U as B};
