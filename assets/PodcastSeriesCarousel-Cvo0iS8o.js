import{d as g,R as k,_ as T,P as h,o as n,b as l,N as m,i as b,e as c,t as p,F as y,L as C,n as D,k as f,h as v,V as x}from"./iframe-CnvubKsn.js";import{L as _}from"./LayoutHelper-BwDRSrMo.js";import{T as N}from"./ThumbnailCarousel-gu28B-aS.js";const d=k(),w=g({name:"PodcastSeriesCarousel",components:{LayoutHelper:_,ThumbnailCarousel:N},props:{series:{type:Object,required:!1},initialSeasonId:{type:String,required:!1}},data(){return{activeTabId:""}},computed:{sortedSeasons(){let e;return this.series&&this.series.seasons&&(e=this.series.seasons,e=e.toSorted((s,t)=>{if(s.seasonNumber&&t.seasonNumber)return s.seasonNumber-t.seasonNumber})),e},activeSeasonId(){var e,s;if(this.activeTabId)return this.activeTabId;if(this.initialSeasonId)return this.initialSeasonId;if((s=(e=this.series)==null?void 0:e.seasons)!=null&&s.length)return this.series.seasons[0].id},initialEpisodeIndex(){var s,t;let e;return(s=this.series)!=null&&s.seasons&&this.activeSeasonId&&(d!=null&&d.path)?(e=(t=this.series.seasons.find(a=>a.id===this.activeSeasonId))==null?void 0:t.episodes,e?e.findIndex(a=>a.url===d.path):null):null},activeTabData(){var s,t,a;let e;if((t=(s=this.series)==null?void 0:s.seasons)!=null&&t.length&&(this.activeSeasonId?e=this.series.seasons.find(i=>i.id===this.activeSeasonId):e=this.series.seasons[0],(a=e==null?void 0:e.episodes)!=null&&a.length)){let i=e.episodes;i=i.toSorted((u,o)=>{if(u.publicationDate&&o.publicationDate)return new Date(u.publicationDate).getTime()-new Date(o.publicationDate).getTime()}),e={...e,episodes:i}}return e}},methods:{updateActiveTab(e){this.activeTabId=e}}}),L={key:0,class:"PodcastSeriesCarousel"},E={class:"text-gray-dark text-3xl lg:text-6xl font-semibold leading-normal tracking-normal uppercase mb-2 lg:mb-5"},P={class:"flex flex-wrap mb-6 lg:mb-10"},$=["aria-expanded","onClick"],B={key:0,class:"text-h6"};function V(e,s,t,a,i,u){const o=h("LayoutHelper"),S=h("ThumbnailCarousel");return e.series&&e.activeTabData?(n(),l("div",L,[m(o,{indent:"col-2"},{default:b(()=>[c("h2",E," More "+p(e.series.title)+" Episodes ",1),c("ul",P,[(n(!0),l(y,null,C(e.sortedSeasons,(r,I)=>(n(),l("li",{key:I,class:"last:mr-0 w-auto mr-10 lg:flex-shrink-0"},[c("button",{class:D(["text-subtitle block text-left lg:text-center lg:w-full py-2 border-b-2 text-gray-mid-dark can-hover:hover:text-gray-dark",e.activeSeasonId===r.id?"border-jpl-red text-gray-dark":"border-white"]),"aria-expanded":e.activeSeasonId===r.id?"true":"false",onClick:A=>e.updateActiveTab(r.id)}," Season "+p(r.seasonNumber),11,$)]))),128))])]),_:1}),m(o,{indent:"col-2",class:"mb-4"},{default:b(()=>[e.activeTabData.title?(n(),l("h3",B,p(e.activeTabData.title),1)):f("",!0)]),_:1}),(n(),v(x,null,[(n(),v(S,{key:e.activeSeasonId,"initial-slide":e.activeSeasonId===e.initialSeasonId&&e.initialEpisodeIndex?e.initialEpisodeIndex:0,slides:e.activeTabData.episodes},null,8,["initial-slide","slides"]))],1024))])):f("",!0)}const F=T(w,[["render",V]]);export{F as P};
