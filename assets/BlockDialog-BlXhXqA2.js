var y=Object.defineProperty;var v=(t,e,i)=>e in t?y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var a=(t,e,i)=>v(t,typeof e!="symbol"?e+"":e,i);import{c as E,_ as x,H as w,o as C,h as I,i as d,n as k,l as T,s as F,L as D,p as B}from"./iframe-CaMhF2EI.js";import{I as S}from"./IconClose-aisVTPmw.js";const o={inert:":not([inert]):not([inert] *)",negTabIndex:':not([tabindex^="-"])',disabled:":not(:disabled)"};var _=[`a[href]${o.inert}${o.negTabIndex}`,`area[href]${o.inert}${o.negTabIndex}`,`input:not([type="hidden"]):not([type="radio"])${o.inert}${o.negTabIndex}${o.disabled}`,`input[type="radio"]${o.inert}${o.negTabIndex}${o.disabled}`,`select${o.inert}${o.negTabIndex}${o.disabled}`,`textarea${o.inert}${o.negTabIndex}${o.disabled}`,`button${o.inert}${o.negTabIndex}${o.disabled}`,`details${o.inert} > summary:first-of-type${o.negTabIndex}`,`iframe${o.inert}${o.negTabIndex}`,`audio[controls]${o.inert}${o.negTabIndex}`,`video[controls]${o.inert}${o.negTabIndex}`,`[contenteditable]${o.inert}${o.negTabIndex}`,`[tabindex]${o.inert}${o.negTabIndex}`];function h(t){(t.querySelector("[autofocus]")||t).focus()}function A(t){const e=l(t,!0),i=e?l(t,!1)||e:null;return[e,i]}function l(t,e){if(e&&g(t))return t;if(N(t))if(t.shadowRoot){let i=c(t.shadowRoot,e);for(;i;){const s=l(i,e);if(s)return s;i=f(i,e)}}else if(t.localName==="slot"){const i=t.assignedElements({flatten:!0});e||i.reverse();for(const s of i){const n=l(s,e);if(n)return n}}else{let i=c(t,e);for(;i;){const s=l(i,e);if(s)return s;i=f(i,e)}}return!e&&g(t)?t:null}function c(t,e){return e?t.firstElementChild:t.lastElementChild}function f(t,e){return e?t.nextElementSibling:t.previousElementSibling}const L=t=>t.matches("details:not([open]) *")&&!t.matches("details>summary:first-of-type")?!0:!(t.offsetWidth||t.offsetHeight||t.getClientRects().length),g=t=>{var e;return(e=t.shadowRoot)!=null&&e.delegatesFocus?!1:t.matches(_.join(","))&&!L(t)};function N(t){return t.shadowRoot&&t.getAttribute("tabindex")==="-1"?!1:!t.matches(":disabled,[hidden],[inert]")}function u(t=document){const e=t.activeElement;return e?e.shadowRoot?u(e.shadowRoot)||document.activeElement:e:null}function q(t,e){const[i,s]=A(t);if(!i)return e.preventDefault();const n=u();e.shiftKey&&n===i?(s.focus(),e.preventDefault()):!e.shiftKey&&n===s&&(i.focus(),e.preventDefault())}function R(t,e){function i(s){return!s||s===document||s===window?null:(s.assignedSlot&&(s=s.assignedSlot),s.closest(t)||i(s.getRootNode().host))}return i(e)}const r="data-a11y-dialog";class b{constructor(e){a(this,"$el");a(this,"id");a(this,"previouslyFocused");a(this,"shown");this.$el=e,this.id=this.$el.getAttribute(r)||this.$el.id,this.previouslyFocused=null,this.shown=!1,this.maintainFocus=this.maintainFocus.bind(this),this.bindKeypress=this.bindKeypress.bind(this),this.handleTriggerClicks=this.handleTriggerClicks.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.$el.setAttribute("aria-hidden","true"),this.$el.setAttribute("aria-modal","true"),this.$el.setAttribute("tabindex","-1"),this.$el.hasAttribute("role")||this.$el.setAttribute("role","dialog"),document.addEventListener("click",this.handleTriggerClicks,!0)}destroy(){return this.fire("destroy").defaultPrevented?this:(this.hide(),document.removeEventListener("click",this.handleTriggerClicks,!0),this.$el.replaceWith(this.$el.cloneNode(!0)),this)}show(e){var s;return this.shown?this:this.fire("show",e).defaultPrevented?this:(this.shown=!0,this.$el.removeAttribute("aria-hidden"),this.previouslyFocused=u(),((s=this.previouslyFocused)==null?void 0:s.tagName)==="BODY"&&(e!=null&&e.target)&&(this.previouslyFocused=e.target),(e==null?void 0:e.type)==="focus"?this.maintainFocus(e):h(this.$el),document.body.addEventListener("focus",this.maintainFocus,!0),this.$el.addEventListener("keydown",this.bindKeypress,!0),this)}hide(e){var s,n;return this.shown?this.fire("hide",e).defaultPrevented?this:(this.shown=!1,this.$el.setAttribute("aria-hidden","true"),(n=(s=this.previouslyFocused)==null?void 0:s.focus)==null||n.call(s),document.body.removeEventListener("focus",this.maintainFocus,!0),this.$el.removeEventListener("keydown",this.bindKeypress,!0),this):this}on(e,i,s){return this.$el.addEventListener(e,i,s),this}off(e,i,s){return this.$el.removeEventListener(e,i,s),this}fire(e,i){const s=new CustomEvent(e,{detail:i,cancelable:!0});return this.$el.dispatchEvent(s),s}handleTriggerClicks(e){const i=e.composedPath()[0];i.closest(`[${r}-show="${this.id}"]`)&&this.show(e),(i.closest(`[${r}-hide="${this.id}"]`)||i.closest(`[${r}-hide]`)&&i.closest('[aria-modal="true"]')===this.$el)&&this.hide(e)}bindKeypress(e){if(R('[aria-modal="true"]',u())!==this.$el)return;let i=!1;try{i=!!this.$el.querySelector('[popover]:not([popover="manual"]):popover-open')}catch{}e.key==="Escape"&&this.$el.getAttribute("role")!=="alertdialog"&&!i&&(e.preventDefault(),this.hide(e)),e.key==="Tab"&&q(this.$el,e)}maintainFocus(e){e.target.closest(`[aria-modal="true"], [${r}-ignore-focus-trap]`)||h(this.$el)}}function m(){for(const t of document.querySelectorAll("[data-a11y-dialog]"))new b(t)}typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",m):m());const p=E({name:"BlockDialog",components:{IconClose:S},props:{dialogId:{type:String,required:!0},headingId:{type:String,required:!1,default:""},overlayClose:{type:Boolean,required:!1,default:!0},dialogBoxClass:{type:String,required:!1,default:""}},emits:["show","hide"],data(){return{dialog:null,content:null}},mounted(){this.init(),this.dialog.show()},beforeUnmount(){this.dialog&&this.dialog.destroy()},methods:{init(){this.dialog=this.$refs.DialogRef?new b(this.$refs.DialogRef):null,this.dialog&&this.dialog.on("show",()=>{document.body.classList.add("overflow-hidden"),this.$emit("show")}).on("hide",()=>{document.body.classList.remove("overflow-hidden"),this.$emit("hide")})}}}),K=["id","aria-labelledby"],V=["data-a11y-dialog-hide"],P={class:"container px-4 m-auto"},H={type:"button","data-a11y-dialog-hide":"","aria-label":"Close dialog",class:"button-close absolute right-0 flex-shrink-0 text-white focus:outline-none focus:ring-2"};function O(t,e,i,s,n,z){const $=w("IconClose");return t.dialogId?(C(),I("div",{key:0,id:t.dialogId,ref:"DialogRef","aria-labelledby":t.headingId,"aria-hidden":"true",class:"BlockDialog fixed top-0 left-0 z-60 flex w-full h-full overflow-auto"},[d("div",{class:"dialog-overlay bg-gray-dark bg-opacity-90 fixed top-0 left-0 w-full h-full","data-a11y-dialog-hide":t.overlayClose?"":void 0},null,8,V),d("div",P,[d("div",{role:"document",class:k(["dialog-box relative m-auto bg-white",t.dialogBoxClass])},[d("button",H,[T($)]),F(t.$slots,"default",{},()=>[e[0]||(e[0]=D("Content"))])],2)])],8,K)):B("",!0)}const U=x(p,[["render",O]]);p.__docgenInfo={displayName:"BlockDialog",exportName:"default",description:"",tags:{},props:[{name:"dialogId",type:{name:"string"},required:!0},{name:"headingId",type:{name:"string"},required:!1,defaultValue:{func:!1,value:"''"}},{name:"overlayClose",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"true"}},{name:"dialogBoxClass",type:{name:"string"},required:!1,defaultValue:{func:!1,value:"''"}}],events:[{name:"show"},{name:"hide"}],slots:[{name:"default"}],sourceFiles:["/home/runner/work/explorer-1/explorer-1/apps/vue-storybook/node_modules/@explorer-1/vue/src/components/BlockDialog/BlockDialog.vue"]};export{U as B};
