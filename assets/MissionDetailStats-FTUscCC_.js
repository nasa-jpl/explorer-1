import{c as k,B as U,P as f,_ as w,H as g,o as n,h as o,s as v,i as a,t as r,m as _,w as h,L as y,p as l,n as P,l as V}from"./iframe-9cocL7nB.js";import{B}from"./BaseTimer-7hmwlPN_.js";const T={earth:"Distance from Earth",mars:"Distance traveled on Mars"},$={"/api/v1/missions/":{getPath:(e,t)=>{const s=e.split(t)[1];if(!s)throw console.error(e,t),new Error("Error querying /api/v1/missions/ API");return`/api/mars${t}${s}`},getDistance:e=>{if(typeof(e==null?void 0:e.mi_traveled)>"u")throw console.error(e),new Error("Error processing /api/v1/missions/ data");return{value:e.mi_traveled,system:"imperial"}}},"/spice_data/getRangefromT1/":{getPath:(e,t)=>{const i=e.split(t)[1].split("/"),u=`${i[0]}/${i[1]}/`,d=[f(),f().add(1,"minute")].map(c=>c.toISOString().replace(/\.\d+Z$/,"")).join("/");return`/api/mars/spice_data/getRangefromT1/${u}${d}/1/`},getDistance:(e,t)=>{var i;const s=(i=e==null?void 0:e.items[t])==null?void 0:i.value;if(e.error||e.units!=="KM"||typeof s>"u")throw console.error(e,t),new Error("Error processing /spice_data/getRangefromT1/ data");return{value:Math.round(Number(s)),system:"metric"}}}},b=Object.keys($),q=k({name:"DistanceStats",components:{BaseUnitToggle:U},props:{distanceType:{type:String,required:!0,validator:e=>e===""||Object.keys(T).includes(e)},value:Number,valueSystem:{type:String,required:!1,default:"imperial"},distanceApiUrls:{type:String,required:!1,validator:e=>b.some(t=>e.includes(t)||e==="")},labelClass:String},data(){return{apiDistance:null,showError:!1,timeout:null}},computed:{distanceTypeLabel(){return T[this.distanceType]||this.distanceType},loadedValue(){var e;return this.distanceApiUrls?((e=this.apiDistance)==null?void 0:e.value)||0:this.value},loadedSystem(){var e;return this.distanceApiUrls?((e=this.apiDistance)==null?void 0:e.system)||"imperial":this.valueSystem},isLoading(){return!!this.distanceApiUrls&&this.apiDistance===null}},mounted(){this.distanceApiUrls&&this.getAPIDistance()},beforeUnmount(){clearTimeout(this.timeout)},methods:{async getAPIDistance(){try{const e=b.find(t=>{var s;return(s=this.distanceApiUrls)==null?void 0:s.includes(t)});if(e&&this.distanceApiUrls){const t=$[e],s=t.getPath(this.distanceApiUrls,e),i=await this.$axios.$get(s);e==="/spice_data/getRangefromT1/"?this.updateSPICEData(t,i,0):this.apiDistance=t.getDistance(i,0)}}catch(e){console.error(e),this.showError=!0}},async updateSPICEData(e,t,s){var u;this.apiDistance=e.getDistance(t,s);const i=s+1;if(i<((u=t==null?void 0:t.items)==null?void 0:u.length))this.timeout=setTimeout(this.updateSPICEData.bind(this,e,t,i),1e3);else if(this.distanceApiUrls){const d=await this.$axios.$get(e.getPath(this.distanceApiUrls,"/spice_data/getRangefromT1/"));this.updateSPICEData(e,d,0)}}}}),M={key:0,class:"DistanceStats"},C={key:0},E={key:1};function I(e,t,s,i,u,d){const c=g("BaseUnitToggle");return typeof e.value<"u"||e.distanceApiUrls?(n(),o("div",M,[v(e.$slots,"label",{label:e.distanceTypeLabel},()=>[a("p",null,r(e.distanceTypeLabel),1)]),e.showError?(n(),o("p",C,"Unavailable")):e.isLoading?(n(),o("p",E,"Loading…")):e.loadedValue?(n(),_(c,{key:2,"unit-pair":"MI_KM",value:e.loadedValue,"value-system":e.loadedSystem},{default:h(m=>[v(e.$slots,"value",{formattedValue:m.formattedValue},()=>[y(r(m.formattedValue),1)])]),_:3},8,["value","value-system"])):l("",!0)])):l("",!0)}const N=w(q,[["render",I]]);q.__docgenInfo={displayName:"DistanceStats",description:`Display a distance stat – label, value, unit toggle,
either from a predefined value, or supported API endpoint.`,tags:{},exportName:"default",props:[{name:"distanceType",type:{name:"DistanceType | ''"},required:!0},{name:"value",type:{name:"number"}},{name:"valueSystem",type:{name:"UnitSystemName"},required:!1,defaultValue:{func:!1,value:"'imperial'"}},{name:"distanceApiUrls",type:{name:"string"},required:!1},{name:"labelClass",type:{name:"string"}}],slots:[{name:"label",scoped:!0,bindings:[{name:"label",title:"binding"}]},{name:"value",scoped:!0,bindings:[{name:"formatted-value",title:"binding"}]}],sourceFiles:["/home/runner/work/explorer-1/explorer-1/apps/vue-storybook/node_modules/@explorer-1/vue/src/components/MissionDetailStats/DistanceStats.vue"]};const D={draft:"Select status",current:"Current",future:"Future",proposed:"Proposed",past:"Past"},S={countdown:"Countdown",time_in_orbit:"Time in Orbit",time_on_mars:"Time on Mars",time_to_mars:"Time to Mars",time_to_dest:"Time to Destination"},A=k({name:"MissionDetailStats",components:{BaseTimer:B,DistanceStats:N},props:{showClock:Boolean,clockType:{type:String,required:!0,validator:e=>!!S[e]},startDateTime:String,displayDate:{type:String||null,required:!1},missionTypes:{type:Array,required:!0,default:()=>[]},missionTargets:{type:Array,required:!0,default:()=>[]},status:{type:String,required:!0,validator:e=>!!D[e]},showDistance:Boolean,distanceType:{type:String,required:!1,default:""},distanceValue:Number,distanceApiUrls:String},computed:{clockTypeLabel(){return S[this.clockType]||this.clockType},statusLabel(){return D[this.status]||this.status}}}),L={class:"MissionDetailStats MixedBleedGrid lg:relative lg:z-20 lg:-mt-20 lg:pl-0 lg:mb-20 pl-4 mb-12"},j={class:"theme col-start-indent-col-2 col-end-container lg:py-12 lg:px-0 text-body-lg px-8 py-10 pr-0"},O={key:0,class:"lg:col-span-6 col-span-10"},R={class:"label text-subtitle"},F={class:"label text-subtitle"},z={class:"text-stats-xl"},K={key:2,class:"lg:col-span-2 col-span-5"},G={key:3,class:"lg:col-span-2 col-span-5"},H={key:4,class:"lg:col-span-2 col-span-5"},Z={key:5,class:"lg:col-span-2 col-span-5"};function x(e,t,s,i,u,d){const c=g("BaseTimer"),m=g("DistanceStats");return n(),o("div",L,[t[5]||(t[5]=a("h2",{class:"sr-only"},"Mission Statistics",-1)),a("div",j,[a("div",{class:P(["gap-y-10 grid grid-cols-10",{"adaptive-stats-grid 2xl:grid-cols-11":e.showClock}])},[t[4]||(t[4]=a("div",{class:"lg:block hidden col-span-1 row-span-2"},null,-1)),e.showClock&&e.startDateTime?(n(),o("div",O,[a("p",R,r(e.clockTypeLabel),1),V(c,{"target-date-time":e.startDateTime,"selected-units":["years","months","days","hours","minutes","seconds"],countdown:e.clockType==="countdown"},null,8,["target-date-time","countdown"])])):l("",!0),e.showDistance?(n(),_(m,{key:1,class:"lg:col-span-3 col-span-10","distance-type":e.distanceType,value:e.distanceValue,"value-system":"imperial","distance-api-urls":e.distanceApiUrls},{label:h(p=>[a("p",F,r(p.label),1)]),value:h(p=>[a("span",z,r(p.formattedValue),1)]),_:1},8,["distance-type","value","distance-api-urls"])):l("",!0),e.displayDate?(n(),o("div",K,[t[0]||(t[0]=a("p",{class:"label text-subtitle"},"Launch Date",-1)),a("p",null,r(e.displayDate),1)])):l("",!0),e.missionTypes.length>0?(n(),o("div",G,[t[1]||(t[1]=a("p",{class:"label text-subtitle"},"Type",-1)),y(" "+r(e.missionTypes.map(p=>p.missionType).join(", ")),1)])):l("",!0),e.missionTargets.length>0?(n(),o("div",H,[t[2]||(t[2]=a("p",{class:"label text-subtitle"},"Target",-1)),y(" "+r(e.missionTargets.map(p=>p.target).join(", ")),1)])):l("",!0),e.status!=="draft"?(n(),o("div",Z,[t[3]||(t[3]=a("p",{class:"label text-subtitle"},"Status",-1)),y(" "+r(e.statusLabel),1)])):l("",!0)],2)]),t[6]||(t[6]=a("div",{class:"theme col-start-container-end col-end-bleed"},null,-1))])}const W=w(A,[["render",x]]);A.__docgenInfo={displayName:"MissionDetailStats",description:"Displays mission-related metrics or metadata. All fields optional.",tags:{},exportName:"default",props:[{name:"showClock",type:{name:"boolean"}},{name:"clockType",type:{name:"ClockType"},required:!0},{name:"startDateTime",type:{name:"string"}},{name:"displayDate",type:{name:"String || null"},required:!1},{name:"missionTypes",type:{name:"{ missionType: string }[]"},required:!0,defaultValue:{func:!0,value:"() => []"}},{name:"missionTargets",type:{name:"{ target: string }[]"},required:!0,defaultValue:{func:!0,value:"() => []"}},{name:"status",type:{name:"Status"},required:!0},{name:"showDistance",type:{name:"boolean"}},{name:"distanceType",type:{name:"DistanceType | ''"},required:!1,defaultValue:{func:!1,value:"''"}},{name:"distanceValue",type:{name:"number"}},{name:"distanceApiUrls",type:{name:"string"}}],sourceFiles:["/home/runner/work/explorer-1/explorer-1/apps/vue-storybook/node_modules/@explorer-1/vue/src/components/MissionDetailStats/MissionDetailStats.vue"]};export{N as D,W as M,S as c,T as d,D as s};
